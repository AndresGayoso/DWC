<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comunitat de propietaris</title>
    <script src="edificio.js"></script>
    <script src="funciones.js"></script>
    <style>
        h1,
        .centrada {
            text-align: center;
        }

        .puerta {
            font-weight: bold;
            margin-left: 4px;
            margin-bottom: 5px;
        }

        h3 {
            font-weight: bold;
            margin-left: 4px;
            margin-bottom: 5px;
            margin-top: 5px;
        }

        p {
            margin: 5px;
        }
    </style>
</head>

<body>
    <h1>COMUNITAT DE PROPIETARIS</h1>
    <script>
        setRandomColor();

        var edificio = CrearObjeto();

        var planta;
        var puerta;
        var propietario;
        var acabar = false;

        while (acabar != true) {
            while (planta == null) {
                planta = prompt("Introduce la planta: ");
                if (planta != null) {
                    alert("El dato se ha introducido correctamente");
                } else if (planta == null) {
                    alert("Debes introducir un dato");
                }
            }
            while (puerta == null || puerta < 0) {
                puerta = prompt("Introduce la puerta: ");
                if (puerta != null && puerta > 0) {
                    alert("El dato se ha introducido correctamente");
                } else if (puerta == null || puerta < 0) {
                    alert("Debes introducir un dato(tampoco puede ser negativo)");
                }
            }
            while (propietario == null) {
                propietario = prompt("Introduce el propietario: ");
                if (propietario != null) {
                    alert("El dato se ha introducido correctamente");
                } else if (propietario == null) {
                    alert("Debes introducir un dato");
                }
            }
            edificio.agregarPlanta(planta);
            edificio.agregarPuerta(planta, puerta);
            edificio.agregarPropietario(propietario, planta, puerta);

            seguir = prompt("Â¿Deseas seguir introduciendo datos?")

            if (seguir == null) {
                acabar = true;
            }

        }

        var resultado = edificio.imprimirTodosPropietarios()
        var br = resultado.replace(/\n/g,"<br>")
        var tab = "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"
        var imprimir = br.replace(/\t/g,tab)

        var x = imprimir.split(" ")

        for(let i = 0; i <x.length;i++){
            
            if(x[i].includes("Planta:")){
                x[i] = '<h2 class="planta">' + x[i];
                x[i+1] += "</h2>"
            }
            if(x[i].includes("Puerta:")){
                x[i] = "<h3>" + x[i];
                x[i+1] += "</h3>"
            }
         
        }

        var x = x.join(" ")

        document.write(
            '<h2 class="centrada"> [' +
            edificio.tipoVia + " " +
            edificio.nombreVia + ", " +
            edificio.numeroEdificio + " " +
            "C.P " + edificio.codigoPostal +
            "] </h2>"
        )
        document.write(x)
    </script>
</body>

</html>